<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gen.M Esports Statistics</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="styles/common.css">
  <link rel="stylesheet" href="styles/stats.css">
</head>
<body>
  <nav>
    <img src="images/gen.m.png" alt="Gen.M Esports Logo">
    <span>Gen.M Esports</span>
    <div id="menu">
      <a href="index.html">Home</a>
      <a href="news.html">News</a>
      <a href="roster.html">Roster</a>
      <a href="stats.html">Statistics</a>
      <a href="schedule.html">Schedule</a>
      <a href="videos.html">Videos</a>
    </div>
    <a href="javascript:void(0);" class="icon" onclick="javascript:toggleMenu();">
    <i class="fa fa-bars"></i>
    </a>
  </nav>

  <main>
    <section class="stats-section">
      <h2>Team Statistics</h2>
      <div id="team-stats" class="team-stats">
      </div>
    </section>

    <section class="stats-section">
      <h2>Player Statistics</h2>
      <div id="player-stats" class="player-stats">
      </div>
    </section>
  </main>

  <footer>
    <p style="text-align: center; color: #888; padding: 1rem;">&copy; 2025 GEN M Esports. All rights reserved.</p>
  </footer>

  <script>
    const data = {"players":{"infafox":{"numGames":17,"mostPlayed":["Johanna","Stitches","Blaze","Dehaka","Garrosh","Varian"],"KDA":5.228571428571429,"Takedowns":10.764705882352942,"Deaths":2.0588235294117645,"KillParticipation":0.9202491136314667,"HeroDamage":32540.58823529412,"DPM":1820.9050005257468,"DamageTaken":82496.29411764706,"Healing":2005.2941176470588,"HPM":1407.6920131790268,"SiegeDamage":68044.58823529411,"TeamfightHeroDamage":24983.764705882353,"TeamfightHealingDone":577.3529411764706,"TeamfightDamageTaken":61561.470588235294,"ExperienceContribution":9434.29411764706,"XPM":531.7285132139768,"TimeCCdEnemyHeroes":163.8235294117647,"TimeRootingEnemyHeroes":0,"TimeSilencingEnemyHeroes":5.764705882352941,"TimeStunningEnemyHeroes":31.058823529411764,"TimeSpentDead":76.6470588235294,"length":1059.5294117647059,"TimeSpentDeadPct":0.06835157443067308},"Patienc3":{"numGames":17,"mostPlayed":["Rehgar","Stukov","Brightwing","Deckard","Uther"],"KDA":15.166666666666666,"Takedowns":10.705882352941176,"Deaths":0.7058823529411765,"KillParticipation":0.9388150584517367,"HeroDamage":12036.764705882353,"DPM":678.8750103684873,"DamageTaken":21278.764705882353,"Healing":68569,"HPM":3874.7422549361604,"SiegeDamage":29700.882352941175,"TeamfightHeroDamage":5302.764705882353,"TeamfightHealingDone":9379.235294117647,"TeamfightDamageTaken":10789.941176470587,"ExperienceContribution":7049.529411764706,"XPM":404.8146664718172,"TimeCCdEnemyHeroes":1824.7058823529412,"TimeRootingEnemyHeroes":1.5294117647058822,"TimeSilencingEnemyHeroes":19.41176470588235,"TimeStunningEnemyHeroes":6.882352941176471,"TimeSpentDead":32.64705882352941,"length":1059.5294117647059,"TimeSpentDeadPct":0.030566256995860047},"Majesty":{"numGames":17,"mostPlayed":["Leoric","Dehaka","Blaze","Varian","Malthael","Hogger","Thrall"],"KDA":4.387096774193548,"Takedowns":8,"Deaths":1.8235294117647058,"KillParticipation":0.6340315249917327,"HeroDamage":33760.64705882353,"DPM":1869.534462240449,"DamageTaken":50469.05882352941,"Healing":142.64705882352942,"HPM":1127.0933307767953,"SiegeDamage":142844.58823529413,"TeamfightHeroDamage":18006.41176470588,"TeamfightHealingDone":0,"TeamfightDamageTaken":26407.941176470587,"ExperienceContribution":19969.823529411766,"XPM":1144.2739847374216,"TimeCCdEnemyHeroes":96.82352941176471,"TimeRootingEnemyHeroes":3.8823529411764706,"TimeSilencingEnemyHeroes":2.235294117647059,"TimeStunningEnemyHeroes":11,"TimeSpentDead":83.41176470588235,"length":1059.5294117647059,"TimeSpentDeadPct":0.07151931435302995},"Psyqo":{"numGames":17,"mostPlayed":["Zagara","Sylvanas","Junkrat"],"KDA":6.296296296296297,"Takedowns":10,"Deaths":1.588235294117647,"KillParticipation":0.8318399737517385,"HeroDamage":46688.82352941176,"DPM":2619.631483193977,"DamageTaken":25004.058823529413,"Healing":188.41176470588235,"HPM":78.72332021646538,"SiegeDamage":86492.58823529411,"TeamfightHeroDamage":18514.058823529413,"TeamfightHealingDone":215.58823529411765,"TeamfightDamageTaken":13569.941176470587,"ExperienceContribution":9864.764705882353,"XPM":561.901301485362,"TimeCCdEnemyHeroes":70.82352941176471,"TimeRootingEnemyHeroes":8.117647058823529,"TimeSilencingEnemyHeroes":5,"TimeStunningEnemyHeroes":14,"TimeSpentDead":70.58823529411765,"length":1059.5294117647059,"TimeSpentDeadPct":0.06364217652216131},"Solien":{"numGames":14,"mostPlayed":["Tychus","Genji","Kel'Thuzad","Zagara","Tracer"],"KDA":8.882352941176471,"Takedowns":10.785714285714286,"Deaths":1.2142857142857142,"KillParticipation":0.9354918890633177,"HeroDamage":48285.78571428572,"DPM":2886.2205922950125,"DamageTaken":25446.071428571428,"Healing":0,"HPM":179.5016908639178,"SiegeDamage":72096.14285714286,"TeamfightHeroDamage":24597.571428571428,"TeamfightHealingDone":138.35714285714286,"TeamfightDamageTaken":15134.214285714286,"ExperienceContribution":9244.285714285714,"XPM":547.0455080848446,"TimeCCdEnemyHeroes":37.42857142857143,"TimeRootingEnemyHeroes":2.5,"TimeSilencingEnemyHeroes":0,"TimeStunningEnemyHeroes":5.5,"TimeSpentDead":56,"length":1003.2098214285714,"TimeSpentDeadPct":0.05522879569837164},"LeoRice":{"numGames":3,"mostPlayed":["Raynor","Greymane","Falstad"],"KDA":3.375,"Takedowns":9,"Deaths":2.6666666666666665,"KillParticipation":0.7887205387205386,"HeroDamage":77546.66666666667,"DPM":3550.2993750671644,"DamageTaken":53467.333333333336,"Healing":0,"HPM":433.2304473646773,"SiegeDamage":144250,"TeamfightHeroDamage":43387,"TeamfightHealingDone":0,"TeamfightDamageTaken":29957,"ExperienceContribution":16466.333333333332,"XPM":738.2886832086557,"TimeCCdEnemyHeroes":267,"TimeRootingEnemyHeroes":0,"TimeSilencingEnemyHeroes":0,"TimeStunningEnemyHeroes":3,"TimeSpentDead":142.33333333333334,"length":1322.3541666666667,"TimeSpentDeadPct":0.10971983370811639}},"team":{"NumGames":17,"TeamKDA":1.5076923076923077,"AvgKDA":7.222664017817402,"Takedowns":196,"Deaths":130,"AvgHeroDamage":178476.29411764705,"AvgHealing":70905.35294117648,"AvgTimeCCdEnemyHeroes":2234.1176470588234,"AvgTimeRootingEnemyHeroes":15.588235294117647,"AvgTimeSilencingEnemyHeroes":32.411764705882355,"AvgTimeStunningEnemyHeroes":68,"AvgTimeDead":334.52941176470586}};

    const menu = document.getElementById("menu");
    function toggleMenu() {
      if (menu.style.display === "block") {
        menu.style.display = "none";
      } else {
        menu.style.display = "block";
      }
    } 

    const description = {
      'numgames': "# of Games",
      'teamkda': 'Team KDA',
      'avgkda': 'Average KDA',
      'avgherodamage': "Avg. Hero Damage",
      'avghealing': "Avg. Healing",
      'avgtimeccdenemyheroes': "Avg. Time CC'ing Enemy Heroes",
      'avgtimerootingenemyheroes': "Avg. Time Rooting Enemy Heroes",
      'avgtimesilencingenemyheroes': "Avg. Time Silencing Enemy Heroes",
      'avgtimestunningenemyheroes': "Avg. Time Stunning Enemy Heroes",
      'avgtimedead': "Avg. Time Spent Dead",
      'herodamage': "Hero Damage",
      'damagetaken': 'Damage Taken',
      'siegedamage': "Siege Damage",
      'teamfightherodamage': "Teamfight Hero Dmg.",
      'teamfighthealingdone': 'Teamfight Healing',
      'teamfightdamagetaken': "Teamfight Dmg. Taken",
      'experiencecontribution': 'XP Contribution',
      'xpm': 'XP per Minute',
      'hpm': 'Healing per Minute',
      'dpm': 'Hero Dmg. per Minute',
      'timeccdenemyheroes': "Time CC'ing Enemy",
      'timerootingenemyheroes': "Time Rooting Enemy",
      'timesilencingenemyheroes': "Time Silencing Enemy",
      'timestunningenemyheroes': "Time Stunning Enemy",
      'timespentdead': 'Time Spent Dead',
      'length': 'Avg. Match Length',
      'timespentdeadpct': 'Time Spent Dead (%)'
    }
    function formatValue(value, key) {
      key = key.toLowerCase();
      var time = !key.includes('pct') && (key.includes('time') || key.includes('length'));
      if (time) {
        const minutes = Math.floor(value / 60)
        const seconds = value - minutes * 60;
        let [intPart, decPart] = Number(seconds).toFixed(2).split('.');
        intPart = intPart.padStart(2, '0');
        return `${minutes}:${intPart}.${decPart}`;
      }
      var percent = key.includes('participation') || key.includes('pct');
      if (percent) {
        value *= 100.0;
      }
      var decimals = 2;
      if (key.includes('numgames')) {
        decimals = 0;
      }
      return value.toLocaleString('en-US', {minimumFractionDigits: decimals, maximumFractionDigits: decimals}) + (percent ? "%" : "");
    }

    const teamContainer = document.getElementById("team-stats");

    Object.keys(data.team).forEach((key) => {
      const card = document.createElement("div");
      card.className = "stat-card";
      card.innerHTML = `
        <h3>${description[key.toLowerCase()] || key}</h3>
        <p>${formatValue(data.team[key], key)}</p>
      `;
      teamContainer.appendChild(card);
    });

    const playerContainer = document.getElementById("player-stats");

    Object.keys(data.players).forEach((player) => {
      const card = document.createElement("div");
      card.className = "stat-card";
      card.innerHTML = `
        <h3>${player}</h3>
      `;
      var heroList = `
          <div class="top-heroes">
      `;
      // add mostPlayed first

      for (var index = 0; index < Math.min(3, data.players[player].mostPlayed.length); index++) {
        const hero = data.players[player].mostPlayed[index];
        heroList += `
          <img src="images/heroes/${hero.toLowerCase()}.png" alt="${hero}">
        `;
      };
      card.innerHTML += `
      ${heroList}
          </div>
      `;
      Object.keys(data.players[player]).forEach((stat) => {
        if (stat !== "mostPlayed" && stat !== 'length') {
          card.innerHTML += `
            <div class="stat-row"><span>${description[stat.toLowerCase()] || stat}:</span> <span>${formatValue(data.players[player][stat], stat)}</span>
          `;
        }
      });

      card.innerHTML += `
            <div class="stat-row"><span>${description[('length')] || stat}:</span> <span>${formatValue(data.players[player]['length'], 'length')}</span>
      `;
      playerContainer.appendChild(card);
    });
</script>
</body>
</html>
