<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gen.M Esports Statistics</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="styles/common.css">
  <link rel="stylesheet" href="styles/stats.css">
</head>
<body>
  <nav>
    <img src="images/gen.m.png" alt="Gen.M Esports Logo">
    <span>Gen.M Esports</span>
    <div id="menu">
      <a href="index.html">Home</a>
      <a href="news.html">News</a>
      <a href="roster.html">Roster</a>
      <a href="stats.html">Statistics</a>
      <a href="schedule.html">Schedule</a>
      <a href="videos.html">Videos</a>
    </div>
    <a href="javascript:void(0);" class="icon" onclick="javascript:toggleMenu();">
    <i class="fa fa-bars"></i>
    </a>
  </nav>

  <main>
    <section class="stats-section">
      <h2>Team Statistics</h2>
      <div id="team-stats" class="team-stats">
      </div>
    </section>

    <section class="stats-section">
      <h2>Player Statistics</h2>
      <div id="player-stats" class="player-stats">
      </div>
    </section>
  </main>

  <footer>
    <p style="text-align: center; color: #888; padding: 1rem;">&copy; 2025 GEN M Esports. All rights reserved.</p>
  </footer>

  <script>
    const data = {"players":{"infafox":{"numGames":19,"mostPlayed":["Johanna","Stitches","Blaze","Dehaka","Garrosh","Anub'arak","Cho","Varian"],"KDA":4.625,"Takedowns":9.736842105263158,"Deaths":2.1052631578947367,"KillParticipation":0.9286439437755227,"HeroDamage":31003.263157894737,"DPM":1765.370744782917,"DamageTaken":80543.68421052632,"Healing":1794.2105263157894,"HPM":1376.6384781167126,"SiegeDamage":63839.15789473684,"TeamfightHeroDamage":23578.36842105263,"TeamfightHealingDone":516.578947368421,"TeamfightDamageTaken":60013.31578947369,"ExperienceContribution":8936.368421052632,"XPM":511.01759130791487,"TimeCCdEnemyHeroes":151.31578947368422,"TimeRootingEnemyHeroes":0,"TimeSilencingEnemyHeroes":5.157894736842105,"TimeStunningEnemyHeroes":29.05263157894737,"TimeSpentDead":76.57894736842105,"length":1038.578947368421,"TimeSpentDeadPct":0.07085464030876683},"Psyqo":{"numGames":17,"mostPlayed":["Junkrat","Chromie","Raynor","Li-Ming","Genji","Jaina"],"KDA":5.833333333333333,"Takedowns":10.294117647058824,"Deaths":1.7647058823529411,"KillParticipation":0.8393503555268262,"HeroDamage":49573.117647058825,"DPM":2690.335532509212,"DamageTaken":23630,"Healing":43.411764705882355,"HPM":145.2198262616871,"SiegeDamage":101928.76470588235,"TeamfightHeroDamage":16128.764705882353,"TeamfightHealingDone":0,"TeamfightDamageTaken":10830.470588235294,"ExperienceContribution":11198.764705882353,"XPM":621.3371947922743,"TimeCCdEnemyHeroes":70.29411764705883,"TimeRootingEnemyHeroes":11.529411764705882,"TimeSilencingEnemyHeroes":9.176470588235293,"TimeStunningEnemyHeroes":0,"TimeSpentDead":67.3529411764706,"length":1086.9963235294117,"TimeSpentDeadPct":0.059026486018074656},"Patienc3":{"numGames":19,"mostPlayed":["Rehgar","Stukov","Brightwing","Deckard","Auriel","Uther"],"KDA":11.5,"Takedowns":9.68421052631579,"Deaths":0.8421052631578947,"KillParticipation":0.9452555786147119,"HeroDamage":11991.684210526315,"DPM":694.8485115835383,"DamageTaken":21431.157894736843,"Healing":66035.1052631579,"HPM":3791.099788793784,"SiegeDamage":30112.36842105263,"TeamfightHeroDamage":5384.263157894737,"TeamfightHealingDone":9584.947368421053,"TeamfightDamageTaken":11088.947368421053,"ExperienceContribution":6878.631578947368,"XPM":401.4473442585548,"TimeCCdEnemyHeroes":1923.5263157894738,"TimeRootingEnemyHeroes":1.368421052631579,"TimeSilencingEnemyHeroes":17.36842105263158,"TimeStunningEnemyHeroes":6.7894736842105265,"TimeSpentDead":34.68421052631579,"length":1038.578947368421,"TimeSpentDeadPct":0.03439509525441881},"WholeFoods":{"numGames":2,"mostPlayed":["Sonya","Ragnaros"],"KDA":0.2857142857142857,"Takedowns":1,"Deaths":3.5,"KillParticipation":1,"HeroDamage":24422,"DPM":1692.4792075758694,"DamageTaken":35998.5,"Healing":0,"HPM":279.99248485751355,"SiegeDamage":91497.5,"TeamfightHeroDamage":8771.5,"TeamfightHealingDone":0,"TeamfightDamageTaken":17509,"ExperienceContribution":11198,"XPM":799.7793760210873,"TimeCCdEnemyHeroes":39,"TimeRootingEnemyHeroes":0,"TimeSilencingEnemyHeroes":0,"TimeStunningEnemyHeroes":6,"TimeSpentDead":114,"length":860.5,"TimeSpentDeadPct":0.12918214007225834},"Confused":{"numGames":1,"mostPlayed":["Junkrat"],"KDA":1,"Takedowns":1,"Deaths":1,"KillParticipation":1,"HeroDamage":16714,"DPM":1062.119547229761,"DamageTaken":11925,"Healing":0,"HPM":0,"SiegeDamage":84258,"TeamfightHeroDamage":3061,"TeamfightHealingDone":0,"TeamfightDamageTaken":2955,"ExperienceContribution":9197,"XPM":584.439001787251,"TimeCCdEnemyHeroes":12,"TimeRootingEnemyHeroes":12,"TimeSilencingEnemyHeroes":2,"TimeStunningEnemyHeroes":0,"TimeSpentDead":44,"length":944.1875,"TimeSpentDeadPct":0.04660091348381545},"Solien":{"numGames":15,"mostPlayed":["Tychus","Genji","Kel'Thuzad","Zagara","Gall","Tracer"],"KDA":7.238095238095238,"Takedowns":10.133333333333333,"Deaths":1.4,"KillParticipation":0.9397924297924298,"HeroDamage":47151.46666666667,"DPM":2854.828011815839,"DamageTaken":23749.666666666668,"Healing":0,"HPM":167.53491147298993,"SiegeDamage":70066.33333333333,"TeamfightHeroDamage":24271.133333333335,"TeamfightHealingDone":129.13333333333333,"TeamfightDamageTaken":14125.266666666666,"ExperienceContribution":8804.733333333334,"XPM":524.2264632703702,"TimeCCdEnemyHeroes":35.2,"TimeRootingEnemyHeroes":2.3333333333333335,"TimeSilencingEnemyHeroes":0,"TimeStunningEnemyHeroes":5.133333333333334,"TimeSpentDead":59.06666666666667,"length":988.1166666666667,"TimeSpentDeadPct":0.06030059712119966},"Majesty":{"numGames":17,"mostPlayed":["Leoric","Dehaka","Blaze","Varian","Malthael","Hogger","Thrall"],"KDA":4.387096774193548,"Takedowns":8,"Deaths":1.8235294117647058,"KillParticipation":0.6340315249917327,"HeroDamage":33760.64705882353,"DPM":1869.534462240449,"DamageTaken":50469.05882352941,"Healing":142.64705882352942,"HPM":1127.0933307767953,"SiegeDamage":142844.58823529413,"TeamfightHeroDamage":18006.41176470588,"TeamfightHealingDone":0,"TeamfightDamageTaken":26407.941176470587,"ExperienceContribution":19969.823529411766,"XPM":1144.2739847374216,"TimeCCdEnemyHeroes":96.82352941176471,"TimeRootingEnemyHeroes":3.8823529411764706,"TimeSilencingEnemyHeroes":2.235294117647059,"TimeStunningEnemyHeroes":11,"TimeSpentDead":83.41176470588235,"length":1059.5294117647059,"TimeSpentDeadPct":0.07151931435302995},"LeoRice":{"numGames":3,"mostPlayed":["Raynor","Greymane","Falstad"],"KDA":3.375,"Takedowns":9,"Deaths":2.6666666666666665,"KillParticipation":0.7887205387205386,"HeroDamage":77546.66666666667,"DPM":3550.2993750671644,"DamageTaken":53467.333333333336,"Healing":0,"HPM":433.2304473646773,"SiegeDamage":144250,"TeamfightHeroDamage":43387,"TeamfightHealingDone":0,"TeamfightDamageTaken":29957,"ExperienceContribution":16466.333333333332,"XPM":738.2886832086557,"TimeCCdEnemyHeroes":267,"TimeRootingEnemyHeroes":0,"TimeSilencingEnemyHeroes":0,"TimeStunningEnemyHeroes":3,"TimeSpentDead":142.33333333333334,"length":1322.3541666666667,"TimeSpentDeadPct":0.10971983370811639}},"team":{"NumGames":34,"TeamKDA":2.1837837837837837,"AvgKDA":4.86226318484383,"Takedowns":404,"Deaths":185,"AvgHeroDamage":179881.14705882352,"AvgHealing":69398.79411764706,"AvgTimeCCdEnemyHeroes":1433.5882352941176,"AvgTimeRootingEnemyHeroes":16.5,"AvgTimeSilencingEnemyHeroes":27.91176470588235,"AvgTimeStunningEnemyHeroes":63.470588235294116,"AvgTimeDead":343.2647058823529}};

    const menu = document.getElementById("menu");
    function toggleMenu() {
      if (menu.style.display === "block") {
        menu.style.display = "none";
      } else {
        menu.style.display = "block";
      }
    } 

    const description = {
      'numgames': "# of Games",
      'teamkda': 'Team KDA',
      'avgkda': 'Average KDA',
      'avgherodamage': "Avg. Hero Damage",
      'avghealing': "Avg. Healing",
      'avgtimeccdenemyheroes': "Avg. Time CC'ing Enemy Heroes",
      'avgtimerootingenemyheroes': "Avg. Time Rooting Enemy Heroes",
      'avgtimesilencingenemyheroes': "Avg. Time Silencing Enemy Heroes",
      'avgtimestunningenemyheroes': "Avg. Time Stunning Enemy Heroes",
      'avgtimedead': "Avg. Time Spent Dead",
      'herodamage': "Hero Damage",
      'damagetaken': 'Damage Taken',
      'siegedamage': "Siege Damage",
      'teamfightherodamage': "Teamfight Hero Dmg.",
      'teamfighthealingdone': 'Teamfight Healing',
      'teamfightdamagetaken': "Teamfight Dmg. Taken",
      'experiencecontribution': 'XP Contribution',
      'xpm': 'XP per Minute',
      'hpm': 'Healing per Minute',
      'dpm': 'Hero Dmg. per Minute',
      'timeccdenemyheroes': "Time CC'ing Enemy",
      'timerootingenemyheroes': "Time Rooting Enemy",
      'timesilencingenemyheroes': "Time Silencing Enemy",
      'timestunningenemyheroes': "Time Stunning Enemy",
      'timespentdead': 'Time Spent Dead',
      'length': 'Avg. Match Length',
      'timespentdeadpct': 'Time Spent Dead (%)'
    }
    function formatValue(value, key) {
      key = key.toLowerCase();
      var time = !key.includes('pct') && (key.includes('time') || key.includes('length'));
      if (time) {
        const minutes = Math.floor(value / 60)
        const seconds = value - minutes * 60;
        let [intPart, decPart] = Number(seconds).toFixed(2).split('.');
        intPart = intPart.padStart(2, '0');
        return `${minutes}:${intPart}.${decPart}`;
      }
      var percent = key.includes('participation') || key.includes('pct');
      if (percent) {
        value *= 100.0;
      }
      var decimals = 2;
      if (key.includes('numgames')) {
        decimals = 0;
      }
      return value.toLocaleString('en-US', {minimumFractionDigits: decimals, maximumFractionDigits: decimals}) + (percent ? "%" : "");
    }

    const teamContainer = document.getElementById("team-stats");

    Object.keys(data.team).forEach((key) => {
      const card = document.createElement("div");
      card.className = "stat-card";
      card.innerHTML = `
        <h3>${description[key.toLowerCase()] || key}</h3>
        <p>${formatValue(data.team[key], key)}</p>
      `;
      teamContainer.appendChild(card);
    });

    const playerContainer = document.getElementById("player-stats");

    Object.keys(data.players).forEach((player) => {
      const card = document.createElement("div");
      card.className = "stat-card";
      card.innerHTML = `
        <h3>${player}</h3>
      `;
      var heroList = `
          <div class="top-heroes">
      `;
      // add mostPlayed first

      for (var index = 0; index < Math.min(3, data.players[player].mostPlayed.length); index++) {
        const hero = data.players[player].mostPlayed[index];
        heroList += `
          <img src="images/heroes/${hero.toLowerCase()}.png" alt="${hero}">
        `;
      };
      card.innerHTML += `
      ${heroList}
          </div>
      `;
      Object.keys(data.players[player]).forEach((stat) => {
        if (stat !== "mostPlayed" && stat !== 'length') {
          card.innerHTML += `
            <div class="stat-row"><span>${description[stat.toLowerCase()] || stat}:</span> <span>${formatValue(data.players[player][stat], stat)}</span>
          `;
        }
      });

      card.innerHTML += `
            <div class="stat-row"><span>${description[('length')] || stat}:</span> <span>${formatValue(data.players[player]['length'], 'length')}</span>
      `;
      playerContainer.appendChild(card);
    });
</script>
</body>
</html>
