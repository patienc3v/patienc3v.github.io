<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gen.M Esports Statistics</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="styles/common.css">
  <link rel="stylesheet" href="styles/stats.css">
</head>
<body>
  <nav>
    <img src="images/gen.m.png" alt="Gen.M Esports Logo">
    <span>Gen.M Esports</span>
    <div id="menu">
      <a href="index.html">Home</a>
      <a href="news.html">News</a>
      <a href="roster.html">Roster</a>
      <a href="stats.html">Statistics</a>
      <a href="schedule.html">Schedule</a>
      <a href="videos.html">Videos</a>
    </div>
    <a href="javascript:void(0);" class="icon" onclick="javascript:toggleMenu();">
    <i class="fa fa-bars"></i>
    </a>
  </nav>

  <main>
    <section class="stats-section">
      <h2>Team Statistics</h2>
      <div id="team-stats" class="team-stats">
      </div>
    </section>

    <section class="stats-section">
      <h2>Player Statistics</h2>
      <div id="player-stats" class="player-stats">
      </div>
    </section>
  </main>

  <footer>
    <p style="text-align: center; color: #888; padding: 1rem;">&copy; 2025 GEN M Esports. All rights reserved.</p>
  </footer>

  <script>
    const data = {"players":{"infafox":{"numGames":13,"mostPlayed":["Johanna","Stitches","Blaze","Dehaka","Garrosh"],"KDA":5.033333333333333,"Takedowns":11.615384615384615,"Deaths":2.3076923076923075,"KillParticipation":0.9226334562873024,"HeroDamage":35053.230769230766,"DPM":1918.05894431235,"DamageTaken":83531.15384615384,"Healing":1891.3076923076924,"HPM":1322.2529521310817,"SiegeDamage":70686.61538461539,"TeamfightHeroDamage":26871.923076923078,"TeamfightHealingDone":536.4615384615385,"TeamfightDamageTaken":61977.153846153844,"ExperienceContribution":9972.307692307691,"XPM":550.24141610488,"TimeCCdEnemyHeroes":172.07692307692307,"TimeRootingEnemyHeroes":0,"TimeSilencingEnemyHeroes":6,"TimeStunningEnemyHeroes":34.92307692307692,"TimeSpentDead":85.15384615384616,"length":1090.8701923076924,"TimeSpentDeadPct":0.07475724360042577},"Solien":{"numGames":10,"mostPlayed":["Genji","Zagara","Kel'Thuzad","Tychus"],"KDA":10,"Takedowns":12,"Deaths":1.2,"KillParticipation":0.9321886446886447,"HeroDamage":48587.5,"DPM":2828.698137378022,"DamageTaken":23981.9,"Healing":0,"HPM":124.94217269021286,"SiegeDamage":74067.2,"TeamfightHeroDamage":22590.8,"TeamfightHealingDone":0,"TeamfightDamageTaken":13238,"ExperienceContribution":9487.5,"XPM":552.9799899186376,"TimeCCdEnemyHeroes":40.1,"TimeRootingEnemyHeroes":2.3,"TimeSilencingEnemyHeroes":0,"TimeStunningEnemyHeroes":6.7,"TimeSpentDead":52,"length":1021.425,"TimeSpentDeadPct":0.052937558460265634},"Psyqo":{"numGames":13,"mostPlayed":["Zagara","Junkrat","Sylvanas"],"KDA":6.363636363636363,"Takedowns":10.76923076923077,"Deaths":1.6923076923076923,"KillParticipation":0.8166368887522734,"HeroDamage":52821.46153846154,"DPM":2902.169481946907,"DamageTaken":26212.384615384617,"Healing":0,"HPM":74.54715590123601,"SiegeDamage":92049.61538461539,"TeamfightHeroDamage":20343.615384615383,"TeamfightHealingDone":0,"TeamfightDamageTaken":14335.307692307691,"ExperienceContribution":10459.076923076924,"XPM":584.8595519131451,"TimeCCdEnemyHeroes":71.38461538461539,"TimeRootingEnemyHeroes":8.76923076923077,"TimeSilencingEnemyHeroes":4.153846153846154,"TimeStunningEnemyHeroes":17.307692307692307,"TimeSpentDead":76.3076923076923,"length":1090.8701923076924,"TimeSpentDeadPct":0.06744814193699687},"Patienc3":{"numGames":13,"mostPlayed":["Rehgar","Brightwing","Stukov","Deckard","Uther"],"KDA":16.77777777777778,"Takedowns":11.615384615384615,"Deaths":0.6923076923076923,"KillParticipation":0.9372966148984249,"HeroDamage":12369.153846153846,"DPM":674.6500364034277,"DamageTaken":21060,"Healing":70435.38461538461,"HPM":3883.147347247548,"SiegeDamage":31169.923076923078,"TeamfightHeroDamage":5372.307692307692,"TeamfightHealingDone":10062.153846153846,"TeamfightDamageTaken":10477.923076923076,"ExperienceContribution":7353,"XPM":415.0773047594648,"TimeCCdEnemyHeroes":1743.6923076923076,"TimeRootingEnemyHeroes":0.7692307692307693,"TimeSilencingEnemyHeroes":22.23076923076923,"TimeStunningEnemyHeroes":6.461538461538462,"TimeSpentDead":33.07692307692308,"length":1090.8701923076924,"TimeSpentDeadPct":0.029331358831048645},"Majesty":{"numGames":13,"mostPlayed":["Dehaka","Leoric","Varian","Malthael","Hogger","Thrall"],"KDA":5.476190476190476,"Takedowns":8.846153846153847,"Deaths":1.6153846153846154,"KillParticipation":0.6675796865276504,"HeroDamage":35620.61538461538,"DPM":1927.7090605976825,"DamageTaken":50763.61538461538,"Healing":0,"HPM":1160.6422378516186,"SiegeDamage":150671.76923076922,"TeamfightHeroDamage":19919.76923076923,"TeamfightHealingDone":0,"TeamfightDamageTaken":27214.923076923078,"ExperienceContribution":20866.69230769231,"XPM":1167.7687470195835,"TimeCCdEnemyHeroes":93,"TimeRootingEnemyHeroes":5.076923076923077,"TimeSilencingEnemyHeroes":2.3076923076923075,"TimeStunningEnemyHeroes":11.846153846153847,"TimeSpentDead":76.23076923076923,"length":1090.8701923076924,"TimeSpentDeadPct":0.062214363220892216},"LeoRice":{"numGames":3,"mostPlayed":["Raynor","Greymane","Falstad"],"KDA":3.375,"Takedowns":9,"Deaths":2.6666666666666665,"KillParticipation":0.7887205387205386,"HeroDamage":77546.66666666667,"DPM":3550.2993750671644,"DamageTaken":53467.333333333336,"Healing":0,"HPM":433.2304473646773,"SiegeDamage":144250,"TeamfightHeroDamage":43387,"TeamfightHealingDone":0,"TeamfightDamageTaken":29957,"ExperienceContribution":16466.333333333332,"XPM":738.2886832086557,"TimeCCdEnemyHeroes":267,"TimeRootingEnemyHeroes":0,"TimeSilencingEnemyHeroes":0,"TimeStunningEnemyHeroes":3,"TimeSpentDead":142.33333333333334,"length":1322.3541666666667,"TimeSpentDeadPct":0.10971983370811639}},"team":{"NumGames":13,"TeamKDA":1.588235294117647,"AvgKDA":7.837656325156325,"Takedowns":162,"Deaths":102,"AvgHeroDamage":191134.84615384616,"AvgHealing":72326.69230769231,"AvgTimeCCdEnemyHeroes":2172.6153846153848,"AvgTimeRootingEnemyHeroes":16.384615384615383,"AvgTimeSilencingEnemyHeroes":34.69230769230769,"AvgTimeStunningEnemyHeroes":76.38461538461539,"AvgTimeDead":343.61538461538464}};

    const menu = document.getElementById("menu");
    function toggleMenu() {
      if (menu.style.display === "block") {
        menu.style.display = "none";
      } else {
        menu.style.display = "block";
      }
    } 

    const description = {
      'numgames': "# of Games",
      'teamkda': 'Team KDA',
      'avgkda': 'Average KDA',
      'avgherodamage': "Avg. Hero Damage",
      'avghealing': "Avg. Healing",
      'avgtimeccdenemyheroes': "Avg. Time CC'ing Enemy Heroes",
      'avgtimerootingenemyheroes': "Avg. Time Rooting Enemy Heroes",
      'avgtimesilencingenemyheroes': "Avg. Time Silencing Enemy Heroes",
      'avgtimestunningenemyheroes': "Avg. Time Stunning Enemy Heroes",
      'avgtimedead': "Avg. Time Spent Dead",
      'herodamage': "Hero Damage",
      'damagetaken': 'Damage Taken',
      'siegedamage': "Siege Damage",
      'teamfightherodamage': "Teamfight Hero Dmg.",
      'teamfighthealingdone': 'Teamfight Healing',
      'teamfightdamagetaken': "Teamfight Dmg. Taken",
      'experiencecontribution': 'XP Contribution',
      'xpm': 'XP per Minute',
      'hpm': 'Healing per Minute',
      'dpm': 'Hero Dmg. per Minute',
      'timeccdenemyheroes': "Time CC'ing Enemy",
      'timerootingenemyheroes': "Time Rooting Enemy",
      'timesilencingenemyheroes': "Time Silencing Enemy",
      'timestunningenemyheroes': "Time Stunning Enemy",
      'timespentdead': 'Time Spent Dead',
      'length': 'Avg. Match Length',
      'timespentdeadpct': 'Time Spent Dead (%)'
    }
    function formatValue(value, key) {
      key = key.toLowerCase();
      var time = !key.includes('pct') && (key.includes('time') || key.includes('length'));
      if (time) {
        const minutes = Math.floor(value / 60)
        const seconds = value - minutes * 60;
        let [intPart, decPart] = Number(seconds).toFixed(2).split('.');
        intPart = intPart.padStart(2, '0');
        return `${minutes}:${intPart}.${decPart}`;
      }
      var percent = key.includes('participation') || key.includes('pct');
      if (percent) {
        value *= 100.0;
      }
      var decimals = 2;
      if (key.includes('numgames')) {
        decimals = 0;
      }
      return value.toLocaleString('en-US', {minimumFractionDigits: decimals, maximumFractionDigits: decimals}) + (percent ? "%" : "");
    }

    const teamContainer = document.getElementById("team-stats");

    Object.keys(data.team).forEach((key) => {
      const card = document.createElement("div");
      card.className = "stat-card";
      card.innerHTML = `
        <h3>${description[key.toLowerCase()] || key}</h3>
        <p>${formatValue(data.team[key], key)}</p>
      `;
      teamContainer.appendChild(card);
    });

    const playerContainer = document.getElementById("player-stats");

    Object.keys(data.players).forEach((player) => {
      const card = document.createElement("div");
      card.className = "stat-card";
      card.innerHTML = `
        <h3>${player}</h3>
      `;
      var heroList = `
          <div class="top-heroes">
      `;
      // add mostPlayed first

      for (var index = 0; index < Math.min(3, data.players[player].mostPlayed.length); index++) {
        const hero = data.players[player].mostPlayed[index];
        heroList += `
          <img src="images/heroes/${hero.toLowerCase()}.png" alt="${hero}">
        `;
      };
      card.innerHTML += `
      ${heroList}
          </div>
      `;
      Object.keys(data.players[player]).forEach((stat) => {
        if (stat !== "mostPlayed" && stat !== 'length') {
          card.innerHTML += `
            <div class="stat-row"><span>${description[stat.toLowerCase()] || stat}:</span> <span>${formatValue(data.players[player][stat], stat)}</span>
          `;
        }
      });

      card.innerHTML += `
            <div class="stat-row"><span>${description[('length')] || stat}:</span> <span>${formatValue(data.players[player]['length'], 'length')}</span>
      `;
      playerContainer.appendChild(card);
    });
</script>
</body>
</html>
