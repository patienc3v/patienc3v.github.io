<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gen.M Esports Statistics</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="styles/common.css">
  <link rel="stylesheet" href="styles/stats.css">
</head>
<body>
  <nav>
    <img src="images/gen.m.png" alt="Gen.M Esports Logo">
    <span>Gen.M Esports</span>
    <div id="menu">
      <a href="index.html">Home</a>
      <a href="news.html">News</a>
      <a href="roster.html">Roster</a>
      <a href="stats.html">Statistics</a>
      <a href="schedule.html">Schedule</a>
      <a href="videos.html">Videos</a>
    </div>
    <a href="javascript:void(0);" class="icon" onclick="javascript:toggleMenu();">
    <i class="fa fa-bars"></i>
    </a>
  </nav>

  <main>
    <section class="stats-section">
      <h2>Team Statistics</h2>
      <div id="team-stats" class="team-stats">
      </div>
    </section>

    <section class="stats-section">
      <h2>Player Statistics</h2>
      <div id="player-stats" class="player-stats">
      </div>
    </section>
  </main>

  <footer>
    <p style="text-align: center; color: #888; padding: 1rem;">&copy; 2025 GEN M Esports. All rights reserved.</p>
  </footer>

  <script>
    const data = {"players":{"infafox":{"numGames":11,"mostPlayed":["Johanna","Stitches","Dehaka","Garrosh","Blaze"],"KDA":4.518518518518518,"Takedowns":11.090909090909092,"Deaths":2.4545454545454546,"KillParticipation":0.9150603184694095,"HeroDamage":35946.454545454544,"DPM":1889.1007955255036,"DamageTaken":86668,"Healing":2235.181818181818,"HPM":1381.7405781196098,"SiegeDamage":74398.54545454546,"TeamfightHeroDamage":28161.81818181818,"TeamfightHealingDone":634,"TeamfightDamageTaken":64758.545454545456,"ExperienceContribution":10403.818181818182,"XPM":556.2275333131041,"TimeCCdEnemyHeroes":171.0909090909091,"TimeRootingEnemyHeroes":0,"TimeSilencingEnemyHeroes":7.090909090909091,"TimeStunningEnemyHeroes":31.09090909090909,"TimeSpentDead":90.45454545454545,"length":1129.6761363636363,"TimeSpentDeadPct":0.0754845016207454},"Solien":{"numGames":8,"mostPlayed":["Genji","Kel'Thuzad","Tychus"],"KDA":9.1,"Takedowns":11.375,"Deaths":1.25,"KillParticipation":0.9241643772893773,"HeroDamage":46871.125,"DPM":2592.431254094482,"DamageTaken":24532.5,"Healing":0,"HPM":126.92377857701251,"SiegeDamage":77069.375,"TeamfightHeroDamage":23071.25,"TeamfightHealingDone":0,"TeamfightDamageTaken":13667.625,"ExperienceContribution":10077.25,"XPM":571.2188951897078,"TimeCCdEnemyHeroes":38.5,"TimeRootingEnemyHeroes":2.875,"TimeSilencingEnemyHeroes":0,"TimeStunningEnemyHeroes":2.625,"TimeSpentDead":53.25,"length":1057.421875,"TimeSpentDeadPct":0.052227839580945415},"Majesty":{"numGames":11,"mostPlayed":["Dehaka","Leoric","Varian","Malthael","Hogger","Thrall"],"KDA":4.842105263157895,"Takedowns":8.363636363636363,"Deaths":1.7272727272727273,"KillParticipation":0.6509707983638465,"HeroDamage":36404,"DPM":1895.8963511315103,"DamageTaken":51859.27272727273,"Healing":0,"HPM":1125.246992014686,"SiegeDamage":150148,"TeamfightHeroDamage":20550,"TeamfightHealingDone":0,"TeamfightDamageTaken":27152.363636363636,"ExperienceContribution":21160.909090909092,"XPM":1136.7472470608814,"TimeCCdEnemyHeroes":92.63636363636364,"TimeRootingEnemyHeroes":6,"TimeSilencingEnemyHeroes":2.727272727272727,"TimeStunningEnemyHeroes":14,"TimeSpentDead":82.81818181818181,"length":1129.6761363636363,"TimeSpentDeadPct":0.06470592314524187},"Patienc3":{"numGames":11,"mostPlayed":["Rehgar","Brightwing","Stukov","Uther"],"KDA":15.5,"Takedowns":11.272727272727273,"Deaths":0.7272727272727273,"KillParticipation":0.943753142282554,"HeroDamage":12835.272727272728,"DPM":675.1696593875978,"DamageTaken":21457.727272727272,"Healing":72287.72727272728,"HPM":3829.275259656338,"SiegeDamage":33077.818181818184,"TeamfightHeroDamage":5534.818181818182,"TeamfightHealingDone":9661.727272727272,"TeamfightDamageTaken":10088.727272727272,"ExperienceContribution":7716.090909090909,"XPM":424.46720538056303,"TimeCCdEnemyHeroes":1686.8181818181818,"TimeRootingEnemyHeroes":0,"TimeSilencingEnemyHeroes":26.272727272727273,"TimeStunningEnemyHeroes":3.1818181818181817,"TimeSpentDead":36.18181818181818,"length":1129.6761363636363,"TimeSpentDeadPct":0.03164484211333703},"Psyqo":{"numGames":11,"mostPlayed":["Zagara","Sylvanas","Junkrat"],"KDA":5.5,"Takedowns":10,"Deaths":1.8181818181818181,"KillParticipation":0.7832981412526866,"HeroDamage":53178.27272727273,"DPM":2793.8479803047767,"DamageTaken":27707.454545454544,"Healing":0,"HPM":88.10118424691528,"SiegeDamage":93778.36363636363,"TeamfightHeroDamage":20860.545454545456,"TeamfightHealingDone":0,"TeamfightDamageTaken":15417,"ExperienceContribution":10967.363636363636,"XPM":594.2907849018491,"TimeCCdEnemyHeroes":77.27272727272727,"TimeRootingEnemyHeroes":3.272727272727273,"TimeSilencingEnemyHeroes":2,"TimeStunningEnemyHeroes":20.454545454545453,"TimeSpentDead":82.9090909090909,"length":1129.6761363636363,"TimeSpentDeadPct":0.07089129799154738},"LeoRice":{"numGames":3,"mostPlayed":["Raynor","Greymane","Falstad"],"KDA":3.375,"Takedowns":9,"Deaths":2.6666666666666665,"KillParticipation":0.7887205387205386,"HeroDamage":77546.66666666667,"DPM":3550.2993750671644,"DamageTaken":53467.333333333336,"Healing":0,"HPM":433.2304473646773,"SiegeDamage":144250,"TeamfightHeroDamage":43387,"TeamfightHealingDone":0,"TeamfightDamageTaken":29957,"ExperienceContribution":16466.333333333332,"XPM":738.2886832086557,"TimeCCdEnemyHeroes":267,"TimeRootingEnemyHeroes":0,"TimeSilencingEnemyHeroes":0,"TimeStunningEnemyHeroes":3,"TimeSpentDead":142.33333333333334,"length":1322.3541666666667,"TimeSpentDeadPct":0.10971983370811639}},"team":{"NumGames":11,"TeamKDA":1.434782608695652,"AvgKDA":7.139270630279402,"Takedowns":132,"Deaths":92,"AvgHeroDamage":193601.18181818182,"AvgHealing":74522.90909090909,"AvgTimeCCdEnemyHeroes":2128.6363636363635,"AvgTimeRootingEnemyHeroes":11.363636363636363,"AvgTimeSilencingEnemyHeroes":38.09090909090909,"AvgTimeStunningEnemyHeroes":71.45454545454545,"AvgTimeDead":369.90909090909093}};

    const menu = document.getElementById("menu");
    function toggleMenu() {
      if (menu.style.display === "block") {
        menu.style.display = "none";
      } else {
        menu.style.display = "block";
      }
    } 

    const description = {
      'numgames': "# of Games",
      'teamkda': 'Team KDA',
      'avgkda': 'Average KDA',
      'avgherodamage': "Avg. Hero Damage",
      'avghealing': "Avg. Healing",
      'avgtimeccdenemyheroes': "Avg. Time CC'ing Enemy Heroes",
      'avgtimerootingenemyheroes': "Avg. Time Rooting Enemy Heroes",
      'avgtimesilencingenemyheroes': "Avg. Time Silencing Enemy Heroes",
      'avgtimestunningenemyheroes': "Avg. Time Stunning Enemy Heroes",
      'avgtimedead': "Avg. Time Spent Dead",
      'herodamage': "Hero Damage",
      'damagetaken': 'Damage Taken',
      'siegedamage': "Siege Damage",
      'teamfightherodamage': "Teamfight Hero Dmg.",
      'teamfighthealingdone': 'Teamfight Healing',
      'teamfightdamagetaken': "Teamfight Dmg. Taken",
      'experiencecontribution': 'XP Contribution',
      'xpm': 'XP per Minute',
      'hpm': 'Healing per Minute',
      'dpm': 'Hero Dmg. per Minute',
      'timeccdenemyheroes': "Time CC'ing Enemy",
      'timerootingenemyheroes': "Time Rooting Enemy",
      'timesilencingenemyheroes': "Time Silencing Enemy",
      'timestunningenemyheroes': "Time Stunning Enemy",
      'timespentdead': 'Time Spent Dead',
      'length': 'Avg. Match Length',
      'timespentdeadpct': 'Time Spent Dead (%)'
    }
    function formatValue(value, key) {
      key = key.toLowerCase();
      var time = !key.includes('pct') && (key.includes('time') || key.includes('length'));
      if (time) {
        const minutes = Math.floor(value / 60)
        const seconds = value - minutes * 60;
        let [intPart, decPart] = Number(seconds).toFixed(2).split('.');
        intPart = intPart.padStart(2, '0');
        return `${minutes}:${intPart}.${decPart}`;
      }
      var percent = key.includes('participation') || key.includes('pct');
      if (percent) {
        value *= 100.0;
      }
      var decimals = 2;
      if (key.includes('numgames')) {
        decimals = 0;
      }
      return value.toLocaleString('en-US', {minimumFractionDigits: decimals, maximumFractionDigits: decimals}) + (percent ? "%" : "");
    }

    const teamContainer = document.getElementById("team-stats");

    Object.keys(data.team).forEach((key) => {
      const card = document.createElement("div");
      card.className = "stat-card";
      card.innerHTML = `
        <h3>${description[key.toLowerCase()] || key}</h3>
        <p>${formatValue(data.team[key], key)}</p>
      `;
      teamContainer.appendChild(card);
    });

    const playerContainer = document.getElementById("player-stats");

    Object.keys(data.players).forEach((player) => {
      const card = document.createElement("div");
      card.className = "stat-card";
      card.innerHTML = `
        <h3>${player}</h3>
      `;
      var heroList = `
          <div class="top-heroes">
      `;
      // add mostPlayed first

      for (var index = 0; index < Math.min(3, data.players[player].mostPlayed.length); index++) {
        const hero = data.players[player].mostPlayed[index];
        heroList += `
          <img src="images/heroes/${hero.toLowerCase()}.png" alt="${hero}">
        `;
      };
      card.innerHTML += `
      ${heroList}
          </div>
      `;
      Object.keys(data.players[player]).forEach((stat) => {
        if (stat !== "mostPlayed" && stat !== 'length') {
          card.innerHTML += `
            <div class="stat-row"><span>${description[stat.toLowerCase()] || stat}:</span> <span>${formatValue(data.players[player][stat], stat)}</span>
          `;
        }
      });

      card.innerHTML += `
            <div class="stat-row"><span>${description[('length')] || stat}:</span> <span>${formatValue(data.players[player]['length'], 'length')}</span>
      `;
      playerContainer.appendChild(card);
    });
</script>
</body>
</html>
