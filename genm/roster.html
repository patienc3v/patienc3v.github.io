<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="apple-touch-icon" sizes="180x180" href="images/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="images/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="images/favicon/favicon-16x16.png">
  <link rel="manifest" href="images/favicon/site.webmanifest">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gen.M Esports Roster</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="styles/common.css">
  <link rel="stylesheet" href="styles/roster.css">
</head>
<body>
  <nav>
    <img src="images/gen.m.png" alt="Gen.M Esports Logo">
    <span>Gen.M Esports</span>
    <div id="menu">
      <a href="index.html">Home</a>
      <a href="news.html">News</a>
      <a href="roster.html">Roster</a>
      <a href="stats.html">Statistics</a>
      <a href="schedule.html">Schedule</a>
      <a href="videos.html">Videos</a>
    </div>
    <a href="javascript:void(0);" class="icon" onclick="javascript:toggleMenu();">
    <i class="fa fa-bars"></i>
    </a>
  </nav>

  <main>
    <section class="roster-section">
      <h2>Current Roster</h2>
      <div class="player-grid" id="active">
      </div>
    </section>

    <section class="roster-section">
      <h2>Past Players</h2>
      <div class="player-grid" id="inactive">
      </div>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 Gen.M Esports. All rights reserved.</p>
  </footer>
  <script>
    let roster = [];

    const menu = document.getElementById("menu");
    const sections = [true, false];

  	async function fetchData() {      
      try {
        const response = await fetch("data/roster.json");
        
        if (!response.ok) {
            throw new Error('Error while retrieving the team data.');
        }

        roster = await response.json();

      } catch (error) {
        console.error('Failed to fetch data:', error);
      } finally {
        sections.forEach((section) => {
          console.log(section);
          const container = document.getElementById(section ? "active" : "inactive");

          roster.forEach((player) => {
            if (player.active == section) {
              const card = document.createElement("div");
              card.className = "player-card";
              if (!player.picture) {
                console.log(player.name);
                player.picture = "profile.generic.png";
              }
              card.innerHTML = `
                <img class="profile" src="images/profile/${player.picture}" alt="${player.name}">
                <div class="player-name">${player.name}</div>
                <div class="player-role">${player.role} <img class="flag" src="images/flags/${player.country}.png" alt="BR"></div>
              `;
              container.appendChild(card);
            } 
          });
        });
      }
    }

    function toggleMenu() {
      if (menu.style.display === "block") {
        menu.style.display = "none";
      } else {
        menu.style.display = "block";
      }
    }

    fetchData();
  </script>
</body>
</html>

