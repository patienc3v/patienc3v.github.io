<html>
<head>
<title>NGS Player Stats</title>
<script>/*<![CDATA[*/var season=11;var divisions={"Storm":[],"Heroic":[],"Nexus":[],"A":["East","West"],"B":["Northeast","Southeast","West"],"C":["East","West"],"D":["East","West"],"E":["East","West"]};var tables={};var columnsOfInterest=["KDA","Takedowns","Kill Participation","Hero Damage","DPM","Damage Taken","Healing","HPM","Siege Damage","Team Fight Hero Damage","Team Fight Healing","Team Fight Damage Taken","XP Contribution","XPM","CC Time","Root Time","Silence Time","Stun Time","Time Dead","Time Dead %"];var increasing=["Time Dead","Time Dead %"];var percent=["Kill Participation","Time Dead %"];var time=["Time Dead","CC Time","Stun Time","Silence Time","Root Time"];var columnDict={}
var translation={"XPM":"XP per Minute","HPM":"Heaing per Minute","DPM":"Damage per Minute"};var limit=15;var allDivs=[];var divList=Object.keys(divisions);for(var div of divList){allDivs.push(div);for(var subDiv of divisions[div]){allDivs.push(div+" "+subDiv);}}
var currentStep=0;var totalSteps=allDivs.length;function strip(str){return str.substring(1,str.length-1);}
function generateTable(data,interest,increase){var tableHTML="<div class='statTable'>";var interests=Object.keys(translation);if(interests.includes(interest)){tableHTML+="<h3>"+translation[interest]+" ("+interest+")</h3>";}else{tableHTML+="<h3>"+interest+"</h3>";}
tableHTML+="<table>";tableHTML+="<thead>";tableHTML+="<tr>";tableHTML+="<th>Rank</th>";tableHTML+="<th>Player</th>";tableHTML+="<th>"+interest+"</th>";tableHTML+="<th>Games</th>";tableHTML+="</tr>";tableHTML+="</thead>";tableHTML+="<tbody>";var valueDict={};var games=[];for(var index=1;index<data.length;index++){var values=data[index].split(",");var nGames=strip(values[1]);games.push(parseInt(nGames));var player=strip(values[0]);var value=strip(values[columnDict[interest]]);if(!(value in valueDict)){valueDict[value]={'players':[],'games':[]};}
valueDict[value]['players'].push(player);valueDict[value]['games'].push(nGames);}
games.sort(function(a,b){return a-b});var threshold=games[games.length-1]/3;var count=1;var allValues=Object.keys(valueDict);var changes={};for(var index=0;index<allValues.length;index++){if(percent.includes(interest)){var newValue=parseInt(allValues[index].substring(0,allValues[index].length-1));changes[newValue]=allValues[index];allValues[index]=newValue;}else{if(time.includes(interest)){if(allValues[index].length<5){var newValue="0"+allValues[index];changes[newValue]=allValues[index];allValues[index]=newValue;}}else{var newValue=parseFloat(allValues[index]);;changes[newValue]=allValues[index];allValues[index]=newValue;}}}
if(time.includes(interest)){allValues.sort();}else{allValues.sort(function(a,b){return a-b});}
if(!increasing.includes(interest)){allValues.reverse();}
var changeKeys=Object.keys(changes);for(var v of allValues){var value=v;if(changeKeys.includes(""+v)){value=changes[v];}
for(var index=0;index<valueDict[value]['players'].length;index++){var nGames=valueDict[value]['games'][index];if(nGames<threshold){continue;}
tableHTML+="<tr>";if(value<=0){tableHTML+="<td>#"+count+"</td>";tableHTML+="<td colspan>abc</td>";tableHTML+="<td colspan>a123</td>";tableHTML+="<td colspan>ab123c</td>";}else{var player=valueDict[value]['players'][index];tableHTML+="<tr>";tableHTML+="<td>#"+count+"</td>";tableHTML+="<td>"+player+"</td>";if(percent.includes(interest)){tableHTML+="<td class='right'>"+v+"%</td>";}else{if(time.includes(interest)){tableHTML+="<td class='right'>"+v+"</td>";}else{tableHTML+="<td class='right'>"+parseFloat(v).toFixed(2)+"</td>";}}
tableHTML+="<td class='right'>"+nGames+"</td>";}
tableHTML+="</tr>";count++;if(count>limit){break;}}
if(count>limit){break;}}
tableHTML+="</tbody>";tableHTML+="</table></div>";return tableHTML;}
function loadDivision(div){var xhttp=new XMLHttpRequest();xhttp.onreadystatechange=function(){if(this.readyState==4&&this.status==200){var lines=xhttp.responseText.split("\n");if(Object.keys(columnDict).length==0){var header=lines[0].split(",");for(var index=0;index<header.length;index++){var column=header[index];column=column.substring(1,column.length-1);columnDict[column]=index;}}
var tableHTML="";for(var interest of columnsOfInterest){tableHTML+=generateTable(lines,interest);}
tables[div.replace(' ','')]=tableHTML;updatePercentage();if(div==allDivs[allDivs.length-1]){setTimeout(function(){document.getElementById("loading").style.display="none";activate(divList[0]);},500);}else{loadDivision(allDivs[allDivs.indexOf(div)+1]);}}else{if(this.readyState==4)
alert("Error occurred while loading the stats for Division "+div);}};var divName=div;var divSplit=div.split(' ');if(divSplit.length>1){divName=divSplit[0]+divSplit[1];}
xhttp.open("GET","https://patienc3v.github.io/ngs/data/season"+season+"/div"+divName+".csv");xhttp.send();}
function updatePercentage(){currentStep++;var progress=currentStep/totalSteps*100.0;var percentage=progress.toFixed(1);document.getElementById("loadingPercent").innerHTML=percentage+"%";}
function updateTitle(){document.getElementById('title').innerHTML+=" S"+season;var tabs=document.getElementById("tabs");var first=true;var divList=Object.keys(divisions);var tableElement=document.createElement("TABLE");var trElement=document.createElement("TR");for(var div of divList){var tdElement=document.createElement("TD");var button=document.createElement("BUTTON");button.innerHTML="Div "+div;button.id=div;button.style.width="100%";tdElement.style.width=(100.0/divList.length)+"%";button.classList.add("tabOff");button.setAttribute("onclick","javascript:activate(\""+div+"\");");tdElement.appendChild(button);trElement.appendChild(tdElement);if(divisions[div].length==0){tdElement.rowSpan=2;button.height="100%";}else{tdElement.colSpan=divisions[div].length;}}
tableElement.appendChild(trElement);trElement=document.createElement("TR");for(var div of divList){for(var subDiv of divisions[div]){var tdElement=document.createElement("TD");var button=document.createElement("BUTTON");var divName=div+subDiv;button.innerHTML=subDiv;button.id=divName;button.style.width="100%";button.classList.add("tabOff");button.setAttribute("onclick","javascript:activate(\""+divName+"\");");tdElement.appendChild(button);trElement.appendChild(tdElement);}}
tableElement.appendChild(trElement);tabs.appendChild(tableElement);loadDivision(divList[0]);}
function activate(activeDiv){var target=document.getElementById("statsTables");target.innerHTML=tables[activeDiv];var divList=Object.keys(divisions);for(var div of divList){var button=document.getElementById(div);if(div==activeDiv){button.classList.remove("tabOff");button.classList.add("tabOn");}else{button.classList.remove("tabOn");button.classList.add("tabOff");}
for(subDiv of divisions[div]){var divName=div+subDiv;var button=document.getElementById(divName);if(divName==activeDiv){button.classList.remove("tabOff");button.classList.add("tabOn");}else{button.classList.remove("tabOn");button.classList.add("tabOff");}}}}/*]]>*/</script>
<style>#loading{width:100%;height:100%;z-index:10;background-color:#fff;text-align:center;position:absolute;left:0;top:0;float:left;color:#000;opacity:.75}#loadingProgress{margin:0;position:relative;top:50%;left:50%;font-size:30px;-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}body{background-color:#2c3531;color:#fff;font-family:Sans-serif}.right{text-align:right}h3{background-color:#d1e8e2;color:#000;margin;10px;padding:10px;font-size:x-large;text-align:center}.statTable{width:31%;float:left;margin:10px;padding:10px;background-color:#222}table{width:100%}thead{background-color:#116466;color:#fff;font-size:large}.padding{padding:10px}th{text-align:center;padding:10px}td{padding:10px}.title{font-size:xxx-large;color:#6283cb;margin:0;text-align:center;padding:10px 10px 0 10px;font-weight:bold;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}.tabOn{background-color:#6283cb;color:#000;padding:10px}.tabOff{background-color:#2c3531;color:#ccc;padding:10px}a{color:#fff}.footer{width:100%;position:fixed;left:0;bottom:0;color:#fff;color:#444;text-align:center;margin:0;padding:10px}</style>
</head>
<body onLoad="javascript:updateTitle()">
<div id="loading"><div id="loadingProgress">L O A D I N G<br><div id="loadingPercent">0.0%</div><img src="Spin-1s-40px.png" alt="https://loading.io/spinner/spin/-spinner-ball-circle-rotate-rosary-loader-ajax"></div></div>
<div class="title" id="title">Nexus Gaming Series</div>
<div class="stats">
<div class="tabs padding" id="tabs">
</div>
<div id="statsTables" class="padding">
</div>
</div>
<div class="footer">Copyright &copy; 2021 Patienc3. All Rights Reserved</div>
</body>
</html>