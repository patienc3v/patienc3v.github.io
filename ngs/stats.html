<html>
<head>
<title>NGS Player Stats</title>
<script>/*<![CDATA[*/var season=11;const version="2.0";var divisions=["Storm","Heroic","Nexus","A East","A West","B Northeast","B Southeast","B West","C East","C West","D East","D West","E East","E West"];var included=[];var columnsOfInterest=["KDA","Takedowns","Kill Participation","Hero Damage","DPM","Damage Taken","Healing","HPM","Siege Damage","Team Fight Hero Damage","Team Fight Healing","Team Fight Damage Taken","XP Contribution","XPM","CC Time","Root Time","Silence Time","Stun Time","Time Dead","Time Dead %"];var increasing=["Time Dead","Time Dead %"];var percent=["Kill Participation","Time Dead %"];var time=["Time Dead","CC Time","Stun Time","Silence Time","Root Time"];var translation={"XPM":"XP per Minute","HPM":"Heaing per Minute","DPM":"Damage per Minute"};var rankThreshold=10;var gameThreshold=5;var tables={};for(var div of divisions){tables[div]=[];}
function updateConfiguration(){var configuration="";configuration+=gameThreshold+","+rankThreshold+",";for(var div of divisions){configuration+=(included.includes(div)?"1":"0");}
localStorage.setItem('ngsstConfig'+season,configuration);return configuration;}
function loadLocalStorage(){var storageVersion=parseFloat(localStorage.getItem('ngsstVer'));if(isNaN(storageVersion)||(storageVersion!=null&&Math.floor(storageVersion)<Math.floor(version))){localStorage.setItem('ngsstVer',version);localStorage.setItem('ngsstConfig'+season,null);}
var configuration=localStorage.getItem('ngsstConfig'+season);if(configuration==null||configuration==undefined||configuration=="null"){included=[divisions[0]];configuration=updateConfiguration();}
var configData=configuration.split(",");gameThreshold=parseInt(configData[0]);rankThreshold=parseInt(configData[1]);var rankSlider=document.getElementById('rankRange');rankSlider.value=rankThreshold;updateThreshold('rank',true);var gameSlider=document.getElementById('gameRange');gameSlider.value=gameThreshold;updateThreshold('game',true);for(var divIndex=0;divIndex<configData[2].length;divIndex++){if(parseInt(configData[2].charAt(divIndex))==1){included.push(divisions[divIndex]);}}}
function generateTable(data,interest,increase){var tableArea=document.getElementById("statsTables");var divElement=document.createElement("DIV");divElement.classList.add("statTable");var h3Element=document.createElement("H3");var interests=Object.keys(translation);if(interests.includes(interest)){h3Element.innerHTML=translation[interest]+" ("+interest+")";}else{h3Element.innerHTML=interest;}
divElement.appendChild(h3Element);var tableElement=document.createElement("TABLE");var theadElement=document.createElement("THEAD");var trElement=document.createElement("TR");var header=["Rank","Player",interest,"Games"];for(var column of header){var thElement=document.createElement("TH");thElement.innerHTML=column;trElement.appendChild(thElement);}
theadElement.append(trElement);var tbodyElement=document.createElement("TBODY");var colIndex=columnsOfInterest.indexOf(interest)+2;var valueDict={};for(var playerData of data){var player=playerData[0];var nGames=playerData[1];var value=parseFloat(playerData[colIndex]);if(!(value in valueDict)){valueDict[value]={'players':[],'games':[]};}
valueDict[value]['players'].push(player);valueDict[value]['games'].push(nGames);}
var allValues=Object.keys(valueDict);for(var index=0;index<allValues.length;index++){allValues[index]=parseFloat(allValues[index]);}
if(increase){allValues.sort(function(a,b){return a-b});}else{allValues.sort(function(a,b){return b-a});}
var count=1;for(var value of allValues){for(var index=0;index<valueDict[value]['players'].length;index++){var nGames=parseInt(valueDict[value]['games'][index]);if(nGames<gameThreshold){continue;}
var trElement=document.createElement("TR");var tdElement=document.createElement("TD");tdElement.innerHTML="#"+count;trElement.appendChild(tdElement);var tdElement=document.createElement("TD");tdElement.innerHTML=valueDict[value]['players'][index];trElement.appendChild(tdElement);var tdElement=document.createElement("TD");tdElement.classList.add("right");if(time.includes(interest)){var minutes=parseInt(value/60.0);var seconds=value%60.0;tdElement.innerHTML=minutes+":"+(seconds<10?"0":"")+seconds.toFixed(1);}else{if(percent.includes(interest)){tdElement.innerHTML=(100.0*value).toFixed(2)+"%";}else{tdElement.innerHTML=value.toFixed(2);}}
trElement.appendChild(tdElement);var tdElement=document.createElement("TD");tdElement.classList.add("right");tdElement.innerHTML=nGames;trElement.appendChild(tdElement);tbodyElement.append(trElement);count++;if(count>rankThreshold){break;}}
if(count>rankThreshold){break;}}
tableElement.appendChild(theadElement);tableElement.appendChild(tbodyElement);divElement.appendChild(tableElement);if(count>0){tableArea.appendChild(divElement);}
return;}
function createTables(){updateConfiguration();var data=[];for(var div of included){if(data.length==0){data=Array.from(tables[div]);}else{data=data.concat(tables[div]);}}
var tableArea=document.getElementById("statsTables");while(tableArea.firstChild){tableArea.removeChild(tableArea.firstChild);}
if(data.length==0){var hElement=document.createElement("H2");hElement.innerHTML="You must select at least one division.";tableArea.appendChild(hElement);return;}
for(var column of columnsOfInterest){generateTable(data,column,increasing.includes(column));}}
function processData(data){var lines=data.split("\n");var header=lines[0].split(',');for(var index=1;index<lines.length;index++){var values=lines[index].split(',');if(values.length<10){continue;}
var div=values[1];values.splice(1,1);tables[div].push(values);}
createTables();}
function toggle(div){var button=document.getElementById(div);if(included.includes(div)){var index=included.indexOf(div);included.splice(index,1);button.classList.remove("tabOn");button.classList.add("tabOff");}else{included.push(div);button.classList.remove("tabOff");button.classList.add("tabOn");}
createTables();}
function updateThreshold(id,update){var rangeElement=document.getElementById(id+"Range");var newValue=rangeElement.value;var textElement=document.getElementById(id+"Threshold");textElements=textElement.innerHTML.split(":");textElement.innerHTML=textElements[0]+": "+newValue;if(id=='game'){gameThreshold=newValue;}else{rankThreshold=newValue;}
if(!update){createTables();}}
function handleEvent(e){var bytes=document.getElementById("loadingPercent");bytes.innerHTML=e.loaded+" bytes";if(e.type=="loadend"){bytes.innerHTML+="<p style='font-size:small'>Download complete!</p>";console.log(xhr.getAllResponseHeaders());setTimeout(function(){processData(xhr.response);var loading=document.getElementById("loading");loading.style.display="none";},500);}}
function loadData(){var url="https://patienc3v.github.io/ngs/data/season"+season+".csv";xhr.addEventListener('loadstart',handleEvent);xhr.addEventListener('load',handleEvent);xhr.addEventListener('loadend',handleEvent);xhr.addEventListener('progress',handleEvent);xhr.open("GET",url);xhr.send();}
var xhr=new XMLHttpRequest();;function updateTitle(){document.getElementById('title').innerHTML+=" S"+season;loadLocalStorage();var tabs=document.getElementById("tabs");var first=true;var divList=Object.keys(divisions);var tableElement=document.createElement("TABLE");var trElement=document.createElement("TR");for(var div of divisions){var tdElement=document.createElement("TD");var button=document.createElement("BUTTON");button.innerHTML="Div "+div;button.id=div;button.style.width="100%";tdElement.style.width=(100.0/divisions.length)+"%";if(included.includes(div)){button.classList.add("tabOn");}else{button.classList.add("tabOff");}
button.setAttribute("onclick","javascript:toggle(\""+div+"\");");tdElement.appendChild(button);trElement.appendChild(tdElement);}
tableElement.appendChild(trElement);tabs.appendChild(tableElement);offset=document.getElementById('navbar').clientHeight;document.getElementById('stats').style.top=offset+"px";xhrAgent=loadData();}
var offset=100;var prevScrollpos=window.pageYOffset;window.onscroll=function(){var currentScrollPos=window.pageYOffset;if(prevScrollpos>currentScrollPos){document.getElementById("navbar").style.top="0";}else{document.getElementById("navbar").style.top="-"+offset+"px";}
prevScrollpos=currentScrollPos;}/*]]>*/</script>
<style>#navbar{position:fixed;top:0;width:100%;transition:top .3s;z-index:5;background-color:#000;position:relative:top:0;left:0}#loading{width:100%;height:100%;z-index:10;background-color:#fff;text-align:center;position:absolute;left:0;top:0;float:left;color:#000;opacity:.75}#loadingProgress{margin:0;position:relative;top:50%;left:50%;font-size:30px;-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}body{background-color:#2c3531;color:#fff;font-family:Sans-serif}.right{text-align:right}h3{background-color:#d1e8e2;color:#000;margin;10px;padding:10px;font-size:x-large;text-align:center}.statTable{width:calc(33.3% - 20px);float:left;margin:10px;padding:10px;background-color:#222;box-sizing:border-box}table{width:100%}thead{background-color:#116466;color:#fff;font-size:large}.padding{padding:10px}th{text-align:center;padding:10px}td{padding:10px}.title{font-size:xxx-large;color:#6283cb;margin:0;text-align:center;padding:10px 10px 0 10px;font-weight:bold;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}.tabOn{background-color:#6283cb;color:#000;padding:10px}.tabOff{background-color:#2c3531;color:#ccc;padding:10px}a{color:#fff}.footer{width:100%;position:fixed;left:0;bottom:0;color:#fff;color:#444;text-align:center;margin:0}#controls{float:right;text-align:right;margin-right:10px}.sliderValue{height:20px;margin:5px;padding:5px}.slider{height:20px}#stats{position:relative}</style>
</head>
<body onLoad="javascript:updateTitle()">
<div id="loading"><div id="loadingProgress">L O A D I N G<br><div id="loadingPercent">0 bytes</div><img src="Spin-1s-40px.png" alt="https://loading.io/spinner/spin/-spinner-ball-circle-rotate-rosary-loader-ajax"></div></div>
<div id="navbar">
<div id="controls" class="padding">
<span class="sliderValue" id="gameThreshold">Min. # of games: 5</span><input type="range" min="1" max="15" value="5" class="slider" id="gameRange" oninput="javascript:updateThreshold('game', true);" onmouseup="javascript:updateThreshold('game',false)"><br>
<span class="sliderValue" id="rankThreshold">Max Rank: 10</span><input type="range" min="10" max="100" value="10" class="slider" id="rankRange" oninput="javascript:updateThreshold('rank', true);" onmouseup="javascript:updateThreshold('rank',false)">
</div>
<div class="title" id="title">Nexus Gaming Series</div>
<div class="tabs padding" id="tabs">
</div>
</div>
<div id="stats">
<div id="statsTables" class="padding">
</div>
</div>
<div class="footer padding">Copyright &copy; 2021 Patienc3. All Rights Reserved</div>
</body>
</html>